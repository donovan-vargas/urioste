{% extends "acuatica/acuatica.html" %}{% load static %}
{% block title %}ticket{% endblock %}
{% block right_content %}
<div class="position-absolute top-200px end-0" style="width: 76mm;" id="contenido">
            <div class="bg-pay p-3 text-center">
                <span class="font-weight-bold" >Resumen de Venta</span>
                <div class="fecha">
                    <p class="font-weight-bold" id="fechaventa">Fecha</p>
                </div>
                <div class="hora">
                    <p class="font-weight-bold" id="horaventa">Hora</p>
                </div>
                <div class="d-flex justify-content-between mt-2">
                    <span class="fw-500 .fs-6 text">Realizo venta</span><span>nombreCajero</span>
                </div>
                <div class="d-flex justify-content-between mt-2">
                    <span class="fw-500 .fs-6 text">Cliente</span><span>nombre Cliente</span>
                </div>
                <hr/>
                <div class="bg-pay p-3 text-center">
                    <span class="font-weight-bold">Descripci√≥n de Productos</span>
                </div>
                
                <div class="d-flex justify-content-between mt-2">
                    <span class="fw-500 .fs-6 text">Producto1 </span> <span>$ precio </span>
                </div>
                <div class="d-flex justify-content-between mt-2">
                    <span class="fw-500 .fs-6 text">Producto2 </span> <span>$ precio </span>
                </div>
                <div class="d-flex justify-content-between mt-2">
                    <span class="fw-500 .fs-6 text">Subtotal </span> <span>$ precio </span>
                </div>
                <div class="d-flex justify-content-between mt-2">
                    <span class="fw-500 .fs-6 text">Iva</span> <span>$0.0</span>
                </div>
                <div class="d-flex justify-content-between mt-2">
                    <span class="fw-500 .fs-6 text">Total </span>
                    <span class="text-success">$85.00</span>
                </div>

                <hr />
                <div class="d-flex justify-content-between mt-2">
                    <form class="">
                        <div class="row mb-3 d-flex justify-content-between mt-2">
                            <label
                            for="colFormLabelSm"
                            class="col-sm-2 col-form-label col-form-label-sm"
                            style="margin-right: 0"
                            >Efectivo</label
                            >
                            <div class="col-sm-auto">
                            <input
                                type="text"
                                class="form-control form-control-sm"
                                id="colFormLabelSm"
                            />
                            </div>
                        </div>
                    
                    <hr />
                    <div class="d-flex justify-content-between mt-2">
                        <span class="fw-500">Cambio </span>
                        <span class="text-danger">$cambio</span>
                    </div>
                    <div class="container">
                        <span class="font-weight-bold">Comentarios: </span><span>Proximo cargo <br> fecha tal con descuento<br> tal</span>
                    </div>
                    </form>
                </div>
            </div>
        </div>
</div>
<a type="button" id="crearimagen" target="_blank" class="position-absolute top-200px end-0">Imprimir</a>

<script src="https://code.jquery.com/jquery-2.2.4.js" integrity="sha256-iT6Q9iMJYuQiMWNd9lDyBUStIq/8PuOW33aOqmvFpqI=" crossorigin="anonymous"></script>
  <script>
    var f = new Date();
    var hola = document.write(f.getDate() + "/" + (f.getMonth() +1) + "/" + f.getFullYear());
    var h = document .write(f.getHours() + "/" + (f.getMinutes() + "/" + f.getSeconds()));
    
    var fecha = document.getElementById("fechaventa").innerHTML ="Fecha de la venta:            "+ f.getDate() + "-" + (f.getMonth() +1) + "-" + f.getFullYear() ;
    var hora = document.getElementById("horaventa").innerHTML = "Hora de la venta:              "+ f.getHours() + ":" + (f.getMinutes() + ":" + f.getSeconds() );



    $(function() { 
          $("#crearimagen").click(function() { 
              html2canvas($("#contenido"), {
                  onrendered: function(canvas) {
                      theCanvas = canvas;
                      canvas.setAttribute('id','canvas')
                      document.body.appendChild(canvas);
                      var canvas2 = document.getElementById('canvas');
                      var img = canvas2.toDataURL("image/png");
                      console.log(img);
                      document.body.append(img);
                      /*
                      canvas.toBlob(function(blob) {
                        saveAs(blob, "Dashboard.png"); 
                      });
                      */
                      var w = window.open();
                      w.document.write("<br><img src='"+img+"'/>");
                      w.document.close(); // necessary for IE >= 10
                      w.focus(); // necessary for IE >= 10
                      w.print();
                      w.location.reload();
                  }
              });
              
              
              //var printContents = document.getElementById('canvas');
                /*var w = window.open();
                w.document.write("<br><img src='"+canvas2.toDataURL()+"'/>");
                //w.document.close(); // necessary for IE >= 10
                w.focus(); // necessary for IE >= 10
                w.print();
                w.location.reload();
                
                return true*/


              
          });



          
    });

    </script>
{% endblock %}