{% extends "acuatica/acuatica.html" %}{% load static %} 
{% block title%}ticket{%endblock %} 
{% block right_content %}
<div
  class="position-absolute top-200px end-0 contenido"
  style="width: 76mm"
  id="contenido"
>
  <div class="bg-pay p-3 text-center">
    <span class="font-weight-bold">Resumen de Venta</span>
    <div class="fecha">
      <p class="font-weight-bold" id="fechaventa">Fecha</p>
    </div>
    <div class="hora">
      <p class="font-weight-bold" id="horaventa">Hora</p>
    </div>
    <div class="d-flex justify-content-between mt-2">
      {% if sales %}
      <span class="fw-500 .fs-6 text">Realizo venta</span
      ><span>{{sales.user}}</span>
      {% endif %}
    </div>
    <div class="d-flex justify-content-between mt-2">
      {% if sales %}
      <span class="fw-500 .fs-6 text">Cliente</span
      ><span>{{sales.client}}</span>
      {% endif %}
    </div>
    <hr />
    <div class="bg-pay p-3 text-center">
      <span class="font-weight-bold">Descripci√≥n de Productos</span>
    </div>

    <div class="d-flex justify-content-between mt-2">
      {% for invsale in invSales%}
      <span class="fw-500 .fs-6 text">Producto </span>
      <span> {{invsale.inventory}} </span>
      {% endfor %}
    </div>

    <div class="d-flex justify-content-between mt-2">
      {% if sales %}

      <span class="fw-500 .fs-6 text">Subtotal </span>
      <span>$ {{sales.total}} </span>

      {% endif %}
    </div>
    <div class="d-flex justify-content-between mt-2">
      <span class="fw-500 .fs-6 text">Iva</span> <span>$0.0</span>
    </div>
    <div class="d-flex justify-content-between mt-2">
      {% if sales %}
      <span class="fw-500 .fs-6 text">Total </span>
      <span class="text-success" id="sale_total">$ {{sales.total}}</span>
      {% endif %}
    </div>

    <hr />
    
      <div class="d-flex justify-content-between mt-2">
        {% if sales %}
        <span class="fw-500 .fs-6 text">Efectivo </span>
        <div class="col-sm-auto">
          <span class="text-success" id="efectivo">$ {{sales.cash}}</span>
          {% endif %}
        </div>
      </div>
        <hr />
        <div class="d-flex justify-content-between mt-2">
          <span class="fw-500">Cambio </span>
          <span class="text-danger" id="coins">$cambio</span>
        </div>
        <div class="d-flex justify-content-between mt-2">
          <span class="font-weight-bold">Comentarios: </span
          ><span style="font-size:14px;">{{sales.comments}}</span
          >
        </div>
      </div>    
  </div>
</div>

<style type="text/css">
  @media print {
    body * {
      visibility: hidden;
    }
    .contenido * {
      visibility: visible;
    }
    .contenido {
      position: absolute;
      top: 40px;
      left: 50px;
    }
  }
  @page {
    size: 76mm 200mm; /* landscape */
    /* you can also specify margins here: */
    margin: 5mm;
    margin-right: 5mm; /* for compatibility with both A4 and Letter */
  }
</style>
<script></script>
<script
  src="https://code.jquery.com/jquery-2.2.4.js"
  integrity="sha256-iT6Q9iMJYuQiMWNd9lDyBUStIq/8PuOW33aOqmvFpqI="
  crossorigin="anonymous"
></script>
<script>
  var f = new Date();

  var fecha = (document.getElementById("fechaventa").innerHTML =
    "Fecha de la venta:            " +
    f.getDate() +
    "-" +
    (f.getMonth() + 1) +
    "-" +
    f.getFullYear());
  var hora = (document.getElementById("horaventa").innerHTML =
    "Hora de la venta:              " +
    f.getHours() +
    ":" +
    (f.getMinutes() + ":" + f.getSeconds()));

  var total = document.getElementById("sale_total").textContent;
  var cash = document.getElementById("efectivo").textContent;

  total = total.replace("$", "");
  cash = cash.replace("$", "");

  var coins = parseInt(cash) - parseInt(total);
  console.log(coins);
  document.getElementById("coins").textContent = "$" + coins;

  $(function () {
    window.print();
  });
</script>
{% endblock %}
